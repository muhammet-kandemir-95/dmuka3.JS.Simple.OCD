<html>

<head>
	<title>dmuka3.JS.Simple.OCD</title>

	<link rel="stylesheet" href="css/main.css">
</head>

<body>
	<div id="students-parent">
		<a href="input.html" target="_blank">
			<button>INPUT EXAMPLE</button>
		</a>

		<a href="select.html" target="_blank">
			<button>SELECT EXAMPLE</button>
		</a>

		<a href="checkbox.html" target="_blank">
			<button>CHECKBOX EXAMPLE</button>
		</a>

		<a href="radio.html" target="_blank">
			<button>RADIO EXAMPLE</button>
		</a>

		<a href="mask.html" target="_blank">
			<button>PLUGIN - MASK EXAMPLE</button>
		</a>

		<a href="number.html" target="_blank">
			<button>PLUGIN - NUMBER EXAMPLE</button>
		</a>

		<a href="datetime.html" target="_blank">
			<button>PLUGIN - DATETIME EXAMPLE</button>
		</a>

		<a href="context-menu.html" target="_blank">
			<button>PLUGIN - CONTEXT MENU EXAMPLE</button>
		</a>

		<a href="draggable.html" target="_blank">
			<button>PLUGIN - DRAGGABLE EXAMPLE</button>
		</a>

		<a href="resizable.html" target="_blank">
			<button>PLUGIN - RESIZABLE EXAMPLE</button>
		</a>

		<hr>

		<div class="class-name">
			<input name="Name" placeholder="Class Name" type="text" value="My Class Name">
		</div>
		<div class="add-student">
			<button>Add a Student</button>
		</div>
		<div class="students">
			<div ocd-clone class="student">
				<div>
					<span>Student Name : </span> <input name="Name" placeholder="Student Name" type="text">
				</div>
				<div>
					<span>Student Surname : </span> <input name="Surname" placeholder="Student Surname" type="text">
				</div>
				<div>
					<button class="student-opacity">Add Opacity</button>
				</div>
				<div>
					<span>Addresses</span>
					<button class="add-an-address">Add an Address</button>
				</div>
				<div class="addresses">
					<input ocd-clone name="Description"
						placeholder="Student Address (Press backspace to delete while is empty)" type="text">
				</div>
				<div class="remove-student">
					<button>Remove Student</button>
				</div>
			</div>
			<div class="student">
				<div>
					<span>Student Name : </span> <input name="Name" placeholder="Student Name" type="text"
						value="MUHAMMET">
				</div>
				<div>
					<span>Student Surname : </span> <input name="Surname" placeholder="Student Surname" type="text"
						value="KANDEMIR">
				</div>
				<div>
					<button class="student-opacity">Add Opacity</button>
				</div>
				<div>
					<span>Addresses</span>
					<button class="add-an-address">Add an Address</button>
				</div>
				<div class="addresses">
					<input ocd-clone name="Description"
						placeholder="Student Address (Press backspace to delete while is empty)" type="text">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="MUHAMMET Address 1">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="MUHAMMET Address 2">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="MUHAMMET Address 3">
				</div>
				<div class="remove-student">
					<button>Remove Student</button>
				</div>
			</div>
			<div class="student active-opacity">
				<div>
					<span>Student Name : </span> <input name="Name" placeholder="Student Name" type="text"
						value="MEDINE">
				</div>
				<div>
					<span>Student Surname : </span> <input name="Surname" placeholder="Student Surname" type="text"
						value="KANDEMIR">
				</div>
				<div>
					<button class="student-opacity">Add Opacity</button>
				</div>
				<div>
					<span>Addresses</span>
					<button class="add-an-address">Add an Address</button>
				</div>
				<div class="addresses">
					<input ocd-clone name="Description"
						placeholder="Student Address (Press backspace to delete while is empty)" type="text">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="MEDINE Address 1">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="MEDINE Address 2">
				</div>
				<div class="remove-student">
					<button>Remove Student</button>
				</div>
			</div>
			<div class="student">
				<div>
					<span>Student Name : </span> <input name="Name" placeholder="Student Name" type="text"
						value="NESIBE">
				</div>
				<div>
					<span>Student Surname : </span> <input name="Surname" placeholder="Student Surname" type="text"
						value="KANDEMIR">
				</div>
				<div>
					<button class="student-opacity">Add Opacity</button>
				</div>
				<div>
					<span>Addresses</span>
					<button class="add-an-address">Add an Address</button>
				</div>
				<div class="addresses">
					<input ocd-clone name="Description"
						placeholder="Student Address (Press backspace to delete while is empty)" type="text">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="NESIBE Address 1">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="NESIBE Address 2">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="NESIBE Address 3">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="NESIBE Address 4">
					<input name="Description" placeholder="Student Address (Press backspace to delete while is empty)"
						type="text" value="NESIBE Address 5">
				</div>
				<div class="remove-student">
					<button>Remove Student</button>
				</div>
			</div>
		</div>
	</div>

	<hr>

	<pre></pre>

	<script src="js/dmuka3.JS.Simple.OCD.min.js"></script>
	<script src="js/dmuka3.JS.Simple.OCD.UI.min.js"></script>
	<script>
		var globalMixin = {
			methods: {
				refreshJson: function (eventName) {
					this.$runOnce(function () {
						console.log('EVENT = ' + eventName, this);

						var json = JSON.stringify(this.$root.jobject, null, 4);
						if (json !== $d.q.first('pre').$.html()) {
							$d.q.first('pre').$.html(json);
						}
					});
				}
			},
			on: {
				$init: function () {
					this.refreshJson('INIT Parent');
				},
				$remove: function () {
					this.refreshJson('REMOVE Parent');
				},
				input: function (e) {
					this.refreshJson('INPUT Parent');
				},
				click: function (e) {
					this.refreshJson('CLICK Parent');
				}
			}
		};

		var $student = $d.ocd({
			query: '#students-parent',
			mixins: [globalMixin],
			sub: [{
				single: true,
				query: '>.class-name',
				alias: 'class',
				sub: [{
					single: true,
					query: '>input[name="Name"]',
					alias: 'name',
					mixins: [globalMixin]
				}]
			}, {
				jobject: false,
				single: true,
				query: '>.add-student>button',
				alias: 'addStudent',
				on: {
					click: function (e) {
						this.$parent.students.$add();
					}
				}
			}, {
				parentQuery: '>.students',
				query: '>.student',
				alias: 'students',
				mixins: [globalMixin],
				data: {
					enableOpacity: {
						get: function (key, currentValue) {
							return this.$el.$.is('.active-opacity');
						},
						set: function (value, key) {
							if (value === true) {
								this.$el.$.addClass('active-opacity');
								this.opacityButton.$el.$.text('Remove Opacity');
							} else {
								this.$el.$.removeClass('active-opacity');
								this.opacityButton.$el.$.text('Add Opacity');
							}

							this.refreshJson('SET enableOpacity');
						}
					}
				},
				sub: [{
					single: true,
					query: '>div>*[name="Name"]',
					alias: 'name',
					mixins: [globalMixin]
				}, {
					single: true,
					query: '>div>*[name="Surname"]',
					alias: 'surname',
					mixins: [globalMixin]
				}, {
					jobject: false,
					single: true,
					query: '>div>.student-opacity',
					alias: 'opacityButton',
					mixins: [globalMixin],
					on: {
						click: function (e) {
							this.$parent.enableOpacity = this.$parent.enableOpacity === false;
						}
					}
				}, {
					jobject: false,
					single: true,
					query: '.add-an-address',
					alias: 'addAnAddress',
					on: {
						click: function (e) {
							this.$parent.addresses.$add();
						}
					}
				}, {
					parentQuery: '>.addresses',
					query: '>input[name="Description"]',
					alias: 'addresses',
					mixins: [globalMixin],
					on: {
						keydown: function (e) {
							if (e.keyCode === 8 && this.value === '') {
								this.$remove();
							}
						}
					}
				}, {
					jobject: false,
					single: true,
					query: '>.remove-student>button',
					alias: 'removeStudent',
					on: {
						click: function (e) {
							this.$parent.$remove();
						}
					}
				}]
			}]
		});
	</script>
</body>

</html>